---
title: 解决vuex在页面刷新后数据清除的问题
categories: vuex
tags: vuex
keywords: [vuex]
description: 解决vuex在页面刷新后数据清除的问题
---
# 解决vuex在页面刷新后数据清除的问题
最近在使用vue+vuex的时候遇到了一个问题，第一个页面我们要去请求用户的信息，里面包含了userId，这个时候我们需要把这些用户的信息存放到vuex中，但是从第一个页面跳转到第二个页面的时候我们要去vuex中拿去用户的userId去请求一些其他接口，如果按流程走下去的话是没问题，但是如果我们在第二个页面直接刷新的话，那么在去拿去vuex中的userId的时候回报错，以为刷新页面的话会把vuex清空。最开始想到的办法是在每个依赖userId的接口前面都去判断一下，如果没有就先去请求用户信息的接口，如果依赖的接口烧的话还可以，但是看了一下接口很多，有二三十，所以果断的放弃了这个方法。在网上找了一些方法，总结一下,大概有两种：
1. 利用浏览器的本地存储 例如localStorage sessionStorage cookie 等，在首页获取用户信息的时候存储在sessionStorage中，无论用户怎么刷新都可以保证数据的存在
2. 在根组件中判断用户信息是否获取，如果获取了在让路由继续去渲染，否则的话先去获取用户信息的接口,也就是利用v-if去判断路由何时去渲染

```
<div id="app" ref="center">
    <router-view v-if="isRender"/>
</div>
```